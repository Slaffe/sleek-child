// Prevent scroll when menu is open
html.hash-active.hash-active-header {
	overflow: hidden;
}

#header {
	@include section;

	background: $color-white;

	display: flex;
	align-items: center;
	justify-content: space-between;

	position: sticky;
	top: 0;
	z-index: 99;

	padding-top: $padding-default;
	padding-bottom: $padding-default;

	box-shadow: $shadow-1;

	a {
		color: inherit;
	}

	// Logo
	.site-logo {
		// See site-logo.scss
	}

	// Nav
	nav {
		div > ul {
			@include animated-underline-menu;
		}

		// TODO: Search
		.widget_search {
			display: none;
		}
	}

	// In low res
	@media #{$bp-laptop-max} {
		nav {
			background: $color-white;

			position: fixed;
			left: 0;
			top: 0;
			right: 0;
			height: 100%;
			z-index: 99;

			padding: 6rem $site-padding $padding-large;
			overflow: auto;

			transform: translateX(100%);
			transition: transform $transition-default $transition-easing;

			div > ul {
				> li {
					display: block;
					margin: 0 0 $margin-default;
				}
			}
		}
	}

	// In high res
	@media #{$bp-laptop} {
		padding-top: 0;
		padding-bottom: 0;

		nav {
			div > ul {
				> li {
					display: inline-block;
					margin: 0 0 0 $margin-default;

					> a {
						padding: $padding-default 0;
					}

					// Sub menu
					> ul {
						@include arrow(top, 8px, $color-white, 0, $color-white, 50%);

						background: $color-white;

						margin: 0;
						list-style: none;

						position: absolute;
						left: 50%;
						top: calc(100% + 16px);
						z-index: 99;

						transform: translateX(-50%) scaleY(0);
						transform-origin: 50% top;
						transition: transform $transition-default $transition-default $transition-easing;

						font-size: $font-size-small;

						border-radius: .25rem;
						box-shadow: $shadow-1;

						> li {
							display: block;
							position: relative;

							&:not(:last-child) {
								border-bottom: 1px solid $color-border;
							}

							> a {
								display: block;
								padding: $padding-small;
								white-space: nowrap;
								color: $color-text;

								&:hover {
									color: $color-link;
								}
							}

							// Sub-sub menu
							> ul {
								@include arrow(left, 8px, $color-white, 0, $color-white, 24px);

								background: $color-white;

								margin: 0;
								list-style: none;

								position: absolute;
								left: calc(100% + 16px);
								top: 0;

								transform: scaleX(0);
								transform-origin: left top;
								transition: transform $transition-default $transition-default $transition-easing;

								font-size: $font-size-small;

								border-radius: .25rem;
								box-shadow: $shadow-1;

								> li {
									display: block;

									&:not(:last-child) {
										border-bottom: 1px solid $color-border;
									}

									> a {
										display: block;
										padding: $padding-small;
										white-space: nowrap;
										color: $color-text;

										&:hover {
											color: $color-link;
										}
									}
								}
							}

							&:hover > ul {
								transform: scaleX(1);
							}
						}
					}

					&:hover > ul {
						transform: translateX(-50%) scaleY(1);
					}
				}
			}
		}
	}

	// Menu toggle
	.menu-toggle {
		@include burger-menu-icon($color-text);

		z-index: 100;

		@media #{$bp-laptop} {
			display: none;
		}
	}

	// When menu is open
	&:target {
		nav {
			transform: translateX(0);
		}

		.menu-toggle {
			@include burger-menu-icon-open($color-text);
		}
	}
}
